<html>
<head>
  <title>49.- Explain Two phase commit</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/301769 (en-US); Windows/10.0.14342 (Win64);"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1190"/>
<h1>49.- Explain Two phase commit</h1>

<div>
<span><div>49.- Explain Two phase commit</div><div><br/></div><div><p style="margin: 0.5em 0px; color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">In <a href="https://en.wikipedia.org/wiki/Transaction_processing" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" title="Transaction processing">transaction processing</a>, <a href="https://en.wikipedia.org/wiki/Database" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" title="Database">databases</a>, and <a href="https://en.wikipedia.org/wiki/Computer_networking" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" title="Computer networking">computer networking</a>, the <b>two-phase commit protocol</b> (<b>2PC</b>) is a type of <a href="https://en.wikipedia.org/wiki/Atomic_commit" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" title="Atomic commit">atomic commitment protocol</a> (ACP). It is a <a href="https://en.wikipedia.org/wiki/Distributed_algorithm" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" title="Distributed algorithm">distributed algorithm</a> that coordinates all the processes that participate in a <a href="https://en.wikipedia.org/wiki/Distributed_transaction" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" title="Distributed transaction">distributed atomic transaction</a> on whether to <i><a href="https://en.wikipedia.org/wiki/Commit_(data_management)" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" title="Commit (data management)">commit</a></i> or <i>abort</i> (<i>roll back</i>) the transaction (it is a specialized type of <a href="https://en.wikipedia.org/wiki/Consensus_(computer_science)" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" title="Consensus (computer science)">consensus</a> protocol). The protocol achieves its goal even in many cases of temporary system failure (involving either process, network node, communication, etc. failures), and is thus widely used.<sup style="unicode-bidi: isolate; white-space: nowrap; font-size: 11.2px; font-weight: normal; font-style: normal;"><a href="https://en.wikipedia.org/wiki/Two-phase_commit_protocol#cite_note-bernstein1987-1" style="text-decoration: none; color: rgb(11, 0, 128); white-space: nowrap; background: none;">[1]</a></sup><sup style="unicode-bidi: isolate; white-space: nowrap; font-size: 11.2px; font-weight: normal; font-style: normal;"><a href="https://en.wikipedia.org/wiki/Two-phase_commit_protocol#cite_note-weikum2001-2" style="text-decoration: none; color: rgb(11, 0, 128); white-space: nowrap; background: none;">[2]</a></sup><sup style="unicode-bidi: isolate; white-space: nowrap; font-size: 11.2px; font-weight: normal; font-style: normal;"><a href="https://en.wikipedia.org/wiki/Two-phase_commit_protocol#cite_note-Bern2009-3" style="text-decoration: none; color: rgb(11, 0, 128); white-space: nowrap; background: none;">[3]</a></sup> However, it is not resilient to all possible failure configurations, and in rare cases, user (e.g., a system's administrator) intervention is needed to remedy an outcome. To accommodate recovery from failure (automatic in most cases) the protocol's participants use <a href="https://en.wikipedia.org/wiki/Server_log" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" title="Server log">logging</a> of the protocol's states. Log records, which are typically slow to generate but survive failures, are used by the protocol's <a href="https://en.wikipedia.org/wiki/Recovery_procedure" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" title="Recovery procedure">recovery procedures</a>. Many protocol variants exist that primarily differ in logging strategies and recovery mechanisms. Though usually intended to be used infrequently, recovery procedures compose a substantial portion of the protocol, due to many possible failure scenarios to be considered and supported by the protocol.</p><p style="margin: 0.5em 0px; color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">In a &quot;normal execution&quot; of any single <a href="https://en.wikipedia.org/wiki/Distributed_transaction" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" title="Distributed transaction">distributed transaction</a>, i.e., when no failure occurs, which is typically the most frequent situation, the protocol consists of two phases:</p><ol style="margin: 0.3em 0px 0px 3.2em; padding: 0px; list-style-image: none; color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="margin-bottom: 0.1em;">The <i>commit-request phase</i> (or <i>voting phase</i>), in which a <i>coordinator</i> process attempts to prepare all the transaction's participating processes (named <i>participants</i>, <i>cohorts</i>, or <i>workers</i>) to take the necessary steps for either committing or aborting the transaction and to <i>vote</i>, either &quot;Yes&quot;: commit (if the transaction participant's local portion execution has ended properly), or &quot;No&quot;: abort (if a problem has been detected with the local portion), and</li><li style="margin-bottom: 0.1em;">The <i>commit phase</i>, in which, based on <i>voting</i> of the cohorts, the coordinator decides whether to commit (only if <i>all</i> have voted &quot;Yes&quot;) or abort the transaction (otherwise), and notifies the result to all the cohorts. The cohorts then follow with the needed actions (commit or abort) with their local transactional resources (also called <i>recoverable resources</i>; e.g., database data) and their respective portions in the transaction's other output (if applicable).</li></ol><div style="margin: 0.5em 0px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="color: rgb(37, 37, 37);"><span style="font-family: sans-serif;"><span style="font-size: 15px;">Note that the two-phase commit (2PC) protocol should not be confused with the <a href="https://en.wikipedia.org/wiki/Two-phase_locking" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" title="Two-phase locking"><span style="font-size: 15px;">two-phase locking</span></a> (2PL) protocol, a <a href="https://en.wikipedia.org/wiki/Concurrency_control" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" title="Concurrency control"><span style="font-size: 15px;">concurrency control</span></a> protocol.</span></span></span></div><div><span style="color: rgb(37, 37, 37);"><span style="font-family: sans-serif;"><br/></span></span></div><div><img src="49.- Explain Two phase commit_files/Image.png" type="image/png"/></div></div></div></span>
</div></body></html> 