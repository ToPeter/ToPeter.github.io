<html>
<head>
  <title>Data aggregation &amp; grouping</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/301769 (en-US); Windows/10.0.14342 (Win64);"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="870"/>
<h1>Data aggregation &amp; grouping</h1>

<div>
<span><div><span style="font-family: sans-serif;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(37, 37, 37);">6.- What is aggregation and grouping</span></span></span></div><div><span style="font-family: sans-serif;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(37, 37, 37);"><br/></span></span></span></div><div><span style="color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: rgb(255, 255, 255);">I</span><span style="color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: rgb(255, 255, 255);">n database management an </span><b style="color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px; font-style: normal; font-variant: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">aggregate function</b><span style="color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: rgb(255, 255, 255);"> is a </span><a href="https://en.wikipedia.org/wiki/Subroutine" style="text-decoration: none; color: rgb(11, 0, 128); font-family: sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: none rgb(255, 255, 255);" title="Subroutine">function</a><span style="color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: rgb(255, 255, 255);"> where the values of multiple rows are grouped together as input on certain criteria to form a single value of more significant meaning or measurement such as a </span><a href="https://en.wikipedia.org/wiki/Set_(computer_science)" style="text-decoration: none; color: rgb(11, 0, 128); font-family: sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: none rgb(255, 255, 255);" title="Set (computer science)">set</a><span style="color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: rgb(255, 255, 255);">, a </span><a href="https://en.wikipedia.org/wiki/Set_(computer_science)#Multiset" style="text-decoration: none; color: rgb(11, 0, 128); font-family: sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: none rgb(255, 255, 255);" title="Set (computer science)">bag</a><span style="color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: rgb(255, 255, 255);"> or a </span><a href="https://en.wikipedia.org/wiki/List_(computing)" style="text-decoration: none; color: rgb(11, 0, 128); font-family: sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: none rgb(255, 255, 255);" title="List (computing)">list</a><span style="color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: rgb(255, 255, 255);">.</span></div><div><span style="font-family: sans-serif;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(37, 37, 37);"><br/></span></span></span></div><div><span style="color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: rgb(255, 255, 255);">Common aggregate functions include:</span></div><div><span style="font-family: sans-serif;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(37, 37, 37);"><br/></span></span></span></div><div><p style="margin: 0.5em 0px; color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">Common aggregate functions include:</p><ul style="list-style-type: disc; margin: 0.3em 0px 0px 1.6em; padding: 0px; list-style-image: url(&quot;data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%225%22%20height%3D%2213%22%3E%0A%3Ccircle%20cx%3D%222.5%22%20cy%3D%229.5%22%20r%3D%222.5%22%20fill%3D%22%2300528c%22%2F%3E%0A%3C%2Fsvg%3E%0A&quot;); color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="margin-bottom: 0.1em;"><a href="https://en.wikipedia.org/wiki/Average" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" title="Average">Average</a>() (i.e., <a href="https://en.wikipedia.org/wiki/Arithmetic_mean" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" title="Arithmetic mean">arithmetic mean</a>)</li><li style="margin-bottom: 0.1em;"><a href="https://en.wikipedia.org/wiki/Counting" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" title="Counting">Count</a>()</li><li style="margin-bottom: 0.1em;"><a href="https://en.wikipedia.org/wiki/Maximum" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" title="Maximum">Maximum</a>()</li><li style="margin-bottom: 0.1em;">nanmean() (mean ignoring NaN values (or undefined values or 'nil's))</li><li style="margin-bottom: 0.1em;"><a href="https://en.wikipedia.org/wiki/Median" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" title="Median">Median</a>()</li><li style="margin-bottom: 0.1em;"><a href="https://en.wikipedia.org/wiki/Minimum" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" title="Minimum">Minimum</a>()</li><li style="margin-bottom: 0.1em;"><a href="https://en.wikipedia.org/wiki/Mode_(statistics)" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" title="Mode (statistics)">Mode</a>()</li><li style="margin-bottom: 0.1em;"><a href="https://en.wikipedia.org/wiki/Summation" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" title="Summation">Sum</a>()</li></ul><div style="margin-bottom: 0.1em;"><div><br/></div><div>Extra info: </div><div><span style="color: rgb(108, 108, 108); font-family: &apos;NeueHaasGroteskText W01&apos;, Helvetica, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: rgb(255, 255, 255);">purposes such as statistical analysis. A common aggregation purpose is to get more information about particular groups based on specific variables such as age, profession, or income. The information about such groups can then be used for Web site </span><a href="http://searchcrm.techtarget.com/definition/personalization" style="text-decoration: underline; color: rgb(0, 179, 172); transition: color 0.2s; font-family: &apos;NeueHaasGroteskText W01&apos;, Helvetica, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">personalization</a><span style="color: rgb(108, 108, 108); font-family: &apos;NeueHaasGroteskText W01&apos;, Helvetica, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: rgb(255, 255, 255);"> to choose content and advertising likely to appeal to an individual belonging to one or more groups for which data has been collected. For example, a site that sells music CDs might advertise certain CDs based on the age of the user and the data aggregate for their age group. Online analytic processing (</span><a href="http://searchdatamanagement.techtarget.com/definition/OLAP" style="text-decoration: underline; color: rgb(0, 179, 172); transition: color 0.2s; font-family: &apos;NeueHaasGroteskText W01&apos;, Helvetica, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">OLAP</a><span style="color: rgb(108, 108, 108); font-family: &apos;NeueHaasGroteskText W01&apos;, Helvetica, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: rgb(255, 255, 255);">) is a simple type of data aggregation in which the marketer uses an online reporting mechanism to process the information.</span></div><div><span style="font-size: 16px;"><span style="font-family: &apos;NeueHaasGroteskText W01&apos;, Helvetica, Arial, sans-serif;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(108, 108, 108);"><br/></span></span></span></span></div><div style="box-sizing: border-box; color: rgb(0, 0, 0); margin: 0em 0.2em 1em; word-wrap: break-word; padding: 0px; text-align: justify; font-size: 15px !important; font-family: Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="font-size: 24px;"><u><b>GROUPING</b></u></span></div><div><br/></div><div>The SQL <b style="box-sizing: border-box;">GROUP BY </b>clause is used in collaboration with the SELECT statement to arrange identical data into groups.</div></div><div style="box-sizing: border-box; margin: 0em 0.2em 1em; word-wrap: break-word; padding: 0px; text-align: justify; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="font-family: Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif;"><span style="font-size: 15px;">The GROUP BY clause follows the WHERE clause in a SELECT statement and precedes the ORDER BY clause.</span></span></div><div><span style="font-family: Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif;"><br/></span></div><div style="box-sizing: border-box; color: rgb(18, 18, 20); font-weight: normal; letter-spacing: -1px; margin: 0.2em 0.2em 0.2em 0px; padding: 0px; text-shadow: rgb(204, 204, 204) 1px 1px 2px; position: relative; left: 0px; font-family: Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif; font-style: normal; font-variant: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 23px;"><div>Syntax:</div></div><div style="box-sizing: border-box; margin: 0em 0.2em 1em; word-wrap: break-word; padding: 0px; text-align: justify; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="font-family: Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif;"><span style="font-size: 15px;">The GROUP BY clause must follow the conditions in the WHERE clause and must precede the ORDER BY clause if one is used.</span></span></div><div><span style="font-family: Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif;"><br/></span></div><div><img src="Data aggregation & grouping_files/Image.png" type="image/png" style="height: auto;"/></div><div><br/></div><div><h2 style="box-sizing: border-box; color: rgb(18, 18, 20); font-weight: normal; letter-spacing: -1px; margin: 0.2em 0.2em 0.2em 0px; font-size: 1.7em; padding: 0px; text-shadow: rgb(204, 204, 204) 1px 1px 2px; position: relative; left: 0px; font-family: Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif; font-style: normal; font-variant: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">Example:</h2><div style="box-sizing: border-box; margin: 0em 0.2em 1em; word-wrap: break-word; padding: 0px; text-align: justify; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="font-family: Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif;"><span style="font-size: 15px;">Consider the CUSTOMERS table is having the following records</span></span></div><div><span style="font-family: Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif;"><br/></span></div><div><img src="Data aggregation & grouping_files/Image [1].png" type="image/png" style="height: auto;"/></div><div><br/></div><div><span style="color: rgb(0, 0, 0); font-family: Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: rgb(255, 255, 255);">If you want to know the total amount of salary on each customer, then GROUP BY query would be as follows:</span></div><div><span style="font-family: Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif;"><span style="background-color: rgb(255, 255, 255);"><br/></span></span></div><div><img src="Data aggregation & grouping_files/Image [2].png" type="image/png" style="height: auto;"/> </div><div><span style="font-family: Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif;"><span style="background-color: rgb(255, 255, 255);"><br/></span></span></div><div><span style="color: rgb(0, 0, 0); font-family: Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: rgb(255, 255, 255);">This would produce the following result:</span></div><div><br/></div><div><img src="Data aggregation & grouping_files/Image [3].png" type="image/png" style="height: auto;"/></div><div><br/></div><div><span style="color: rgb(0, 0, 0); font-family: Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: rgb(255, 255, 255);">Now, let us have following table where CUSTOMERS table has the following records with duplicate names:</span></div><div><span style="font-family: Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif;"><span style="background-color: rgb(255, 255, 255);"><br/></span></span></div><div><img src="Data aggregation & grouping_files/Image [4].png" type="image/png" style="height: auto;"/></div><div><br/></div><div><span style="color: rgb(0, 0, 0); font-family: Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: rgb(255, 255, 255);">Now again, if you want to know the total amount of salary on each customer, then GROUP BY query would be as follows:</span></div><div><span style="font-family: Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif;"><span style="background-color: rgb(255, 255, 255);"><br/></span></span></div><div><img src="Data aggregation & grouping_files/Image [5].png" type="image/png" style="height: auto;"/></div><div><br/></div><div><span style="color: rgb(0, 0, 0); font-family: Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: rgb(255, 255, 255);">This would produce the following result:</span></div><div><span style="font-family: Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif;"><span style="background-color: rgb(255, 255, 255);"><br/></span></span></div><div><img src="Data aggregation & grouping_files/Image [6].png" type="image/png" style="height: auto;"/></div><div><br/></div><div align="left"><span style="font-size: 19px;"><font color="#010101" face="Times New Roman">SQL</font> <font color="#010101" face="Times New Roman"><span style="font-size: 19px;"><span style="font-size: 19px;">supports generalizations of the <b><span style="font-size: 19px;">group by</span></b> construct to perform the <span style="font-size: 19px;"><b>cube</b> </span></span></span></font></span><font color="#010101" face="Times New Roman"><span style="font-size: 19px;">and <span style="font-size: 19px;"><b><span style="font-size: 19px;">rollup</span></b> operations.</span></span></font></div><div align="left"><span style="font-family: &apos;Times New Roman&apos;;"><span style="color: rgb(1, 1, 1);"><br/></span></span></div><div align="left"><img src="Data aggregation & grouping_files/Image [7].png" type="image/png" style="height:auto;" width="527"/></div><div align="left"><br/></div><div align="left"><img src="Data aggregation & grouping_files/Image [8].png" type="image/png" style="height:auto;" width="632"/></div><div align="left"><br/></div><div align="left"><img src="Data aggregation & grouping_files/Image [9].png" type="image/png" style="height:auto;" width="535"/></div><div align="left"><br/></div><div align="left"><img src="Data aggregation & grouping_files/Image [10].png" type="image/png" style="height:auto;" width="681"/></div><div align="left"><br/></div><div align="left"><br/></div></div></div></div></div></div></div></span>
</div></body></html> 